# 万濮云 - 毛衣开发管理系统 (SweaterCraft Pro) 需求文档

## 1. 项目概述
专门用于针织毛衣开发流程的管理系统，旨在追踪从设计稿到大货生产前的每一个样衣开发节点。

## 2. 核心概念层级
- **款式 (Product)**：基础货号单位（如 SY-8821）。
- **样衣轮次 (Sample Version)**：同一个款式下的多次打样（如 头样、二样、三样）。
- **流程节点 (Stage/Node)**：每个样衣轮次包含的开发步骤（如 设计与工艺、横机编程）。
- **扩展字段 (Custom Fields)**：款式层级的自定义属性（如 针型、成分、季节）。
- **工艺参数 (Fields)**：节点层级的具体参数登记（如 克重、尺寸内容）。

## 3. 核心功能需求

### 3.1 款式管理
- **录入/编辑**：支持录入款号、品名及无限数量的自定义扩展字段。具备**智能记忆**功能，自动带出上个产品的字段名。
- **状态流转**：商品分为“开发中”和“已归档”两个状态，可随时切换。
- **大货同步**：开发完成后，可点击“生成大货生产商品信息”，状态转为“已同步”（SYNC SUCCESS）。
- **安全删除**：仅在未产生开发记录（所有节点为 Pending）时允许彻底删除。

### 3.2 开发流程自定义
- **模板初始化**：创建新款式时可自定义流程步骤及顺序。
- **动态调整**：支持在录入阶段对流程进行新增、删除、上下排序。

### 3.3 样衣轮次管理
- **多轮次追踪**：每个款式支持新增无限轮次的样衣。
- **进度独立**：每一轮样衣拥有自己独立的流程状态和参数记录。

### 3.4 节点登记与执行
- **状态颜色规范**：
  - `待开始`：灰色 (Slate-300)
  - `进行中` : 蓝色 (Blue-600)
  - `已完成` : 绿色 (Emerald-500)
  - `异常/退回` : 红色 (Red-500)
- **工艺登记**：支持动态添加参数。具备**参数名记忆**逻辑，相同名称的节点会自动填充历史参数标签。
- **附件管理**：支持图片、文档、压缩包（.zip, .rar）上传。支持在线预览与本地下载。数据需 Base64 持久化存入数据库。

### 3.5 筛选与搜索
- **全文搜索**：支持按款号、品名搜索。
- **组合筛选**：支持按同步状态、当前进行的节点名称筛选。

### 3.6 开发日志
- **版本绑定**：日志按样衣轮次进行归集。
- **自动化记录**：追踪状态变更、参数修改等关键操作人及时间。

## 4. UI/UX 规范
- **布局**：左侧窄导航 + 中间款式列表 + 右侧超大工作区。
- **交互**：采用 32px+ 大圆角，阴影柔和。登记弹窗需支持“自动合并未保存项”的防呆设计。
- **显示策略**：时间轴详情需自动隐藏内容为空的参数项。
